{{ $_hugo_config := `{ "version": 1 }` }}
<!--
    file name and path from; https://github.com/matcornic/hugo-theme-learn/blob/master/layouts/shortcodes/mermaid.html
    shortcode js/html from; https://liveaverage.com/projects/integration-mermaid/
-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.4.8/mermaid.min.js" type="text/javascript"></script>
<script type="text/javascript">
    mermaid.initialize({ 
        "theme": "null", // Mermaid suggests one should be able to include custom CSS here but I was unsuccessful.
        cloneCssStyles: false,
        useMaxWidth: true,
        htmlLabels: false,
        flowchart: { 
                curve: 'basis' 
        }
    });
</script>

<pre class="mermaid" align="{{ if .Get "align" }}{{ .Get "align" }}{{ else }}center{{ end }}">{{ safeHTML .Inner }}</pre>